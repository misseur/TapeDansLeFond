!function(e,r){"object"==typeof exports&&"object"==typeof module?module.exports=r(require("react")):"function"==typeof define&&define.amd?define(["react"],r):"object"==typeof exports?exports.AsyncProps=r(require("react")):e.AsyncProps=r(e.React)}(this,function(e){return function(e){function r(t){if(n[t])return n[t].exports;var o=n[t]={exports:{},id:t,loaded:!1};return e[t].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}var n={};return r.m=e,r.c=n,r.p="",r(0)}([function(e,r,n){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function o(e,r){var n={};for(var t in e)r.indexOf(t)>=0||Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t]);return n}function a(e,r){for(var n=0,t=e.length;t>n;n++)if("object"===m(e[n]))for(var o in e[n])r(e[n][o],n,o);else r(e[n],n)}function s(e){var r=[];return a(e,function(e){e&&e.loadProps&&r.push(e)}),r}function i(e,r){var n=e.components,t=e.params,o=e.loadContext,a=[],s=[],i=n.length,u=[],p=function(e){return e?void r(e):void(0===i&&r(null,{propsArray:s,componentsArray:a}))};return 0===i?p():void n.forEach(function(e,n){e.loadProps({params:t,loadContext:o},function(t,o){u[n]&&0===i?r(t,{propsArray:[o],componentsArray:[e]}):(u[n]||i--,s[n]=o,a[n]=e,u[n]=!0,p(t))})})}function u(e,r){var n=r.componentsArray,t=r.propsArray,o=n.indexOf(e);return t[o]}function p(e,r){for(var n=0,t=r.propsArray.length;t>n;n++){var o=r.componentsArray[n],a=e.componentsArray.indexOf(o),s=-1===a;s?(e.propsArray.push(r.propsArray[n]),e.componentsArray.push(r.componentsArray[n])):e.propsArray[a]=r.propsArray[n]}return e}function l(e,r){return e.loadProps?v["default"].createElement(C,{Component:e,routerProps:r}):v["default"].createElement(e,r)}function c(e,r,n){var t=e.components,o=e.params;i({components:s(t),params:o,loadContext:r},function(e,r){if(e)n(e);else{var t=JSON.stringify(r.propsArray,null,2),o="<script>__ASYNC_PROPS__ = "+t+"</script>";n(null,r,o)}})}function f(e){return"undefined"!=typeof __ASYNC_PROPS__?{propsArray:__ASYNC_PROPS__,componentsArray:s(e.components)}:null}Object.defineProperty(r,"__esModule",{value:!0});var d=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e};r.loadPropsOnServer=c;var h=n(3),v=t(h),y=n(7),g=t(y),A=n(8),E=t(A),P=v["default"].PropTypes,_=P.array,x=P.func,R=P.object,C=v["default"].createClass({displayName:"AsyncPropsContainer",propTypes:{Component:x.isRequired,routerProps:R.isRequired},contextTypes:{asyncProps:R.isRequired},render:function(){var e=this.props,r=e.Component,n=e.routerProps,t=o(e,["Component","routerProps"]),a=this.context.asyncProps,s=a.propsAndComponents,i=a.loading,p=a.reloadComponent,l=u(r,s),c=function(){return p(r)};return v["default"].createElement(r,d({},t,n,l,{reloadAsyncProps:c,loading:i}))}}),O=v["default"].createClass({displayName:"AsyncProps",childContextTypes:{asyncProps:R},propTypes:{loadContext:R,components:_.isRequired,params:R.isRequired,location:R.isRequired,onError:x.isRequired,renderLoading:x.isRequired,propsArray:_,componentsArray:_},getDefaultProps:function(){return{onError:function(e){throw e},renderLoading:function(){return null},render:function(e){return v["default"].createElement(g["default"],d({},e,{createElement:l}))}}},getInitialState:function(){var e=this.props,r=e.propsArray,n=e.componentsArray,t=r&&n;return{loading:!1,prevProps:null,propsAndComponents:t?{propsArray:r,componentsArray:n}:f(this.props)}},getChildContext:function(){var e=this,r=this.state,n=r.loading,t=r.propsAndComponents;return{asyncProps:{loading:n,propsAndComponents:t,reloadComponent:function(r){e.reloadComponent(r)}}}},componentDidMount:function(){var e=null!==this.state.propsAndComponents;if(!e){var r=this.props,n=r.components,t=r.params,o=r.location;this.loadAsyncProps(n,t,o)}},componentWillReceiveProps:function(e){if(e.location!==this.props.location){for(var r=(0,E["default"])({routes:this.props.routes,params:this.props.params},{routes:e.routes,params:e.params}),n=r.enterRoutes,t=e.components.length-n.length,o=[],a=0,i=n.length;i>a;a++)o.push(e.components[t+a]);this.loadAsyncProps(s(o),e.params,e.location)}},handleError:function(e){var r=this;return function(n){for(var t=arguments.length,o=Array(t>1?t-1:0),a=1;t>a;a++)o[a-1]=arguments[a];n&&r.props.onError?r.props.onError(n):e.apply(void 0,[null].concat(o))}},componentWillUnmount:function(){this._unmounted=!0},loadAsyncProps:function(e,r,n,t){var o=this,a=this.props.loadContext;this.setState({loading:!0,prevProps:this.props},function(){i({components:s(e),params:r,loadContext:a},o.handleError(function(e,r){var a=t&&t.reload,s=o.props.location===n;!a&&!s||o._unmounted||(o.state.propsAndComponents&&(r=p(o.state.propsAndComponents,r)),o.setState({loading:!1,propsAndComponents:r,prevProps:null}))}))})},reloadComponent:function(e){var r=this.props.params;this.loadAsyncProps([e],r,null,{reload:!0})},render:function(){var e=this.state.propsAndComponents;if(e){var r=this.state.loading?this.state.prevProps:this.props;return this.props.render(r)}return this.props.renderLoading()}});r["default"]=O},function(e,r){function n(){p=!1,s.length?u=s.concat(u):l=-1,u.length&&t()}function t(){if(!p){var e=setTimeout(n);p=!0;for(var r=u.length;r;){for(s=u,u=[];++l<r;)s&&s[l].run();l=-1,r=u.length}s=null,p=!1,clearTimeout(e)}}function o(e,r){this.fun=e,this.array=r}function a(){}var s,i=e.exports={},u=[],p=!1,l=-1;i.nextTick=function(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)r[n-1]=arguments[n];u.push(new o(e,r)),1!==u.length||p||setTimeout(t,0)},o.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=a,i.addListener=a,i.once=a,i.off=a,i.removeListener=a,i.removeAllListeners=a,i.emit=a,i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,r,n){(function(t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,r){r="[react-router] "+r;for(var n=arguments.length,o=Array(n>2?n-2:0),a=2;n>a;a++)o[a-2]=arguments[a];"production"!==t.env.NODE_ENV?i["default"].apply(void 0,[e,r].concat(o)):void 0}r.__esModule=!0,r["default"]=a;var s=n(11),i=o(s);e.exports=r["default"]}).call(r,n(1))},function(r,n){r.exports=e},function(e,r,n){(function(r){"use strict";var n=function(e,n,t,o,a,s,i,u){if("production"!==r.env.NODE_ENV&&void 0===n)throw new Error("invariant requires an error message argument");if(!e){var p;if(void 0===n)p=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var l=[t,o,a,s,i,u],c=0;p=new Error(n.replace(/%s/g,function(){return l[c++]})),p.name="Invariant Violation"}throw p.framesToPop=1,p}};e.exports=n}).call(r,n(1))},function(e,r,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function o(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function a(e){return o(e).replace(/\/+/g,"/+")}function s(e){for(var r="",n=[],t=[],o=void 0,s=0,i=/:([a-zA-Z_$][a-zA-Z0-9_$]*)|\*\*|\*|\(|\)/g;o=i.exec(e);)o.index!==s&&(t.push(e.slice(s,o.index)),r+=a(e.slice(s,o.index))),o[1]?(r+="([^/?#]+)",n.push(o[1])):"**"===o[0]?(r+="([\\s\\S]*)",n.push("splat")):"*"===o[0]?(r+="([\\s\\S]*?)",n.push("splat")):"("===o[0]?r+="(?:":")"===o[0]&&(r+=")?"),t.push(o[0]),s=i.lastIndex;return s!==e.length&&(t.push(e.slice(s,e.length)),r+=a(e.slice(s,e.length))),{pattern:e,regexpSource:r,paramNames:n,tokens:t}}function i(e){return e in m||(m[e]=s(e)),m[e]}function u(e,r){"/"!==e.charAt(0)&&(e="/"+e),"/"!==r.charAt(0)&&(r="/"+r);var n=i(e),t=n.regexpSource,o=n.paramNames,a=n.tokens;t+="/*";var s="*"!==a[a.length-1];s&&(t+="([\\s\\S]*?)");var u=r.match(new RegExp("^"+t+"$","i")),p=void 0,l=void 0;if(null!=u){if(s){p=u.pop();var c=u[0].substr(0,u[0].length-p.length);if(p&&"/"!==c.charAt(c.length-1))return{remainingPathname:null,paramNames:o,paramValues:null}}else p="";l=u.slice(1).map(function(e){return null!=e?decodeURIComponent(e):e})}else p=l=null;return{remainingPathname:p,paramNames:o,paramValues:l}}function p(e){return i(e).paramNames}function l(e,r){var n=u(e,r),t=n.paramNames,o=n.paramValues;return null!=o?t.reduce(function(e,r,n){return e[r]=o[n],e},{}):null}function c(r,n){n=n||{};for(var t=i(r),o=t.tokens,a=0,s="",u=0,p=void 0,l=void 0,c=void 0,f=0,m=o.length;m>f;++f)p=o[f],"*"===p||"**"===p?(c=Array.isArray(n.splat)?n.splat[u++]:n.splat,null!=c||a>0?void 0:"production"!==e.env.NODE_ENV?d["default"](!1,'Missing splat #%s for path "%s"',u,r):d["default"](!1),null!=c&&(s+=encodeURI(c))):"("===p?a+=1:")"===p?a-=1:":"===p.charAt(0)?(l=p.substring(1),c=n[l],null!=c||a>0?void 0:"production"!==e.env.NODE_ENV?d["default"](!1,'Missing "%s" parameter for path "%s"',l,r):d["default"](!1),null!=c&&(s+=encodeURIComponent(c))):s+=p;return s.replace(/\/+/g,"/")}r.__esModule=!0,r.compilePattern=i,r.matchPattern=u,r.getParamNames=p,r.getParams=l,r.formatPattern=c;var f=n(4),d=t(f),m={}}).call(r,n(1))},function(e,r,n){(function(e){"use strict";function t(e){return e&&e.__esModule?e:{"default":e}}function o(e){return null==e||d["default"].isValidElement(e)}function a(e){return o(e)||Array.isArray(e)&&e.every(o)}function s(r,n,t){r=r||"UnknownComponent";for(var o in n)if(n.hasOwnProperty(o)){var a=n[o](t,o,r);a instanceof Error&&("production"!==e.env.NODE_ENV?h["default"](!1,a.message):void 0)}}function i(e,r){return c({},e,r)}function u(e){var r=e.type,n=i(r.defaultProps,e.props);if(r.propTypes&&s(r.displayName||r.name,r.propTypes,n),n.children){var t=p(n.children,n);t.length&&(n.childRoutes=t),delete n.children}return n}function p(e,r){var n=[];return d["default"].Children.forEach(e,function(e){if(d["default"].isValidElement(e))if(e.type.createRouteFromReactElement){var t=e.type.createRouteFromReactElement(e,r);t&&n.push(t)}else n.push(u(e))}),n}function l(e){return a(e)?e=p(e):e&&!Array.isArray(e)&&(e=[e]),e}r.__esModule=!0;var c=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e};r.isReactChildren=a,r.createRouteFromReactElement=u,r.createRoutesFromReactChildren=p,r.createRoutes=l;var f=n(3),d=t(f),m=n(2),h=t(m)}).call(r,n(1))},function(e,r,n){(function(t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}r.__esModule=!0;var a=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var n=arguments[r];for(var t in n)Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t])}return e},s=n(4),i=o(s),u=n(3),p=o(u),l=n(9),c=o(l),f=n(10),d=o(f),m=n(6),h=n(2),v=o(h),y=p["default"].PropTypes,g=y.array,A=y.func,E=y.object,P=p["default"].createClass({displayName:"RouterContext",propTypes:{history:E,router:E.isRequired,location:E.isRequired,routes:g.isRequired,params:E.isRequired,components:g.isRequired,createElement:A.isRequired},getDefaultProps:function(){return{createElement:p["default"].createElement}},childContextTypes:{history:E,location:E.isRequired,router:E.isRequired},getChildContext:function(){var e=this.props,r=e.router,n=e.history,o=e.location;return r||("production"!==t.env.NODE_ENV?v["default"](!1,"`<RouterContext>` expects a `router` rather than a `history`"):void 0,r=a({},n,{setRouteLeaveHook:n.listenBeforeLeavingRoute}),delete r.listenBeforeLeavingRoute),"production"!==t.env.NODE_ENV&&(o=c["default"](o,"`context.location` is deprecated, please use a route component's `props.location` instead. http://tiny.cc/router-accessinglocation")),{history:n,location:o,router:r}},createElement:function(e,r){return null==e?null:this.props.createElement(e,r)},render:function(){var e=this,r=this.props,n=r.history,o=r.location,s=r.routes,u=r.params,l=r.components,c=null;return l&&(c=l.reduceRight(function(r,t,i){if(null==t)return r;var p=s[i],l=d["default"](p,u),c={history:n,location:o,params:u,route:p,routeParams:l,routes:s};if(m.isReactChildren(r))c.children=r;else if(r)for(var f in r)r.hasOwnProperty(f)&&(c[f]=r[f]);if("object"==typeof t){var h={};for(var v in t)t.hasOwnProperty(v)&&(h[v]=e.createElement(t[v],a({key:v},c)));return h}return e.createElement(t,c)},c)),null===c||c===!1||p["default"].isValidElement(c)?void 0:"production"!==t.env.NODE_ENV?i["default"](!1,"The root route must render a single element"):i["default"](!1),c}});r["default"]=P,e.exports=r["default"]}).call(r,n(1))},function(e,r,n){"use strict";function t(e,r,n){if(!e.path)return!1;var t=a.getParamNames(e.path);return t.some(function(e){return r.params[e]!==n.params[e]})}function o(e,r){var n=e&&e.routes,o=r.routes,a=void 0,s=void 0;return n?!function(){var i=!1;a=n.filter(function(n){if(i)return!0;var a=-1===o.indexOf(n)||t(n,e,r);return a&&(i=!0),a}),a.reverse(),s=o.filter(function(e){return-1===n.indexOf(e)||-1!==a.indexOf(e)})}():(a=[],s=o),{leaveRoutes:a,enterRoutes:s}}r.__esModule=!0;var a=n(5);r["default"]=o,e.exports=r["default"]},function(e,r,n){(function(t){"use strict";function o(e){return e&&e.__esModule?e:{"default":e}}function a(e,r){if(!u)return e;var n={},o=function(o){"function"==typeof e[o]?n[o]=function(){return"production"!==t.env.NODE_ENV?i["default"](!1,r):void 0,e[o].apply(e,arguments)}:Object.defineProperty(n,o,{configurable:!1,enumerable:!1,get:function(){return"production"!==t.env.NODE_ENV?i["default"](!1,r):void 0,e[o]}})};for(var a in e)o(a);return n}r.__esModule=!0,r["default"]=a;var s=n(2),i=o(s),u=!1;if("production"!==t.env.NODE_ENV)try{Object.defineProperty({},"x",{get:function(){return!0}}).x&&(u=!0)}catch(p){}e.exports=r["default"]}).call(r,n(1))},function(e,r,n){"use strict";function t(e,r){var n={};if(!e.path)return n;var t=o.getParamNames(e.path);for(var a in r)r.hasOwnProperty(a)&&-1!==t.indexOf(a)&&(n[a]=r[a]);return n}r.__esModule=!0;var o=n(5);r["default"]=t,e.exports=r["default"]},function(e,r,n){(function(r){"use strict";var n=function(){};"production"!==r.env.NODE_ENV&&(n=function(e,r,n){var t=arguments.length;n=new Array(t>2?t-2:0);for(var o=2;t>o;o++)n[o-2]=arguments[o];if(void 0===r)throw new Error("`warning(condition, format, ...args)` requires a warning message argument");if(r.length<10||/^[s\W]*$/.test(r))throw new Error("The warning format should be able to uniquely identify this warning. Please, use a more descriptive format than: "+r);if(!e){var a=0,s="Warning: "+r.replace(/%s/g,function(){return n[a++]});"undefined"!=typeof console&&console.error(s);try{throw new Error(s)}catch(i){}}}),e.exports=n}).call(r,n(1))}])});