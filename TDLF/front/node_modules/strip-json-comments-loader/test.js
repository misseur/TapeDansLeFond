'use strict';
var assert = require('assert');
var loader = require('./');

//mock Webpack
loader.cacheable = function() { };
loader.emitError = function() { };

var testCssString = [
  '// single-line comment',
  'div.className {       ',
  '  color: green;       ',
  '}                     ',
  '/* comment region     ',
  '*/                    '
].join('\n');

var strippedCssString = [
  '                      ',
  'div.className {       ',
  '  color: green;       ',
  '}                     '
].join('\n');

function numWords(source) {
  return source.replace( /\n/g, ' ').split(/[\s]+/).length;
}

var unStrippedSize = numWords(testCssString);
var strippedSize = numWords(strippedCssString);
var resultSize = numWords(loader(testCssString));

it('should be smaller after the stripping', function() {
  assert(unStrippedSize > strippedSize);
});

it('should be the same size as a stripped version', function() {
  assert.equal(strippedSize, resultSize);
});
